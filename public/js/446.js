"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[446],{2856:(t,a,s)=>{s.d(a,{Z:()=>r});var e=s(3645),i=s.n(e)()((function(t){return t[1]}));i.push([t.id,".card[data-v-2c0348e7]:hover{background:#c8e6c9}.is-not-viewed[data-v-2c0348e7]{background:#e0f7fa}.list-header[data-v-2c0348e7]{font-size:14px;font-weight:700}.list-subheader[data-v-2c0348e7]{font-size:12px;font-style:italic}.list-description[data-v-2c0348e7]{font-size:12px}",""]);const r=i},5446:(t,a,s)=>{s.r(a),s.d(a,{default:()=>d});const e={props:["notification"]};var i=s(1900);const r={components:{MemberApproval:(0,i.Z)(e,(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",[s("div",{staticClass:"row"},[s("div",{staticClass:"col-1"},[s("img",{staticClass:"img-fluid rounded",attrs:{src:t.notification.member.avatar}})]),t._v(" "),s("div",{staticClass:"col-auto"},[s("p",{staticClass:"mb-0"},[t._v("\n                "+t._s(t.notification.member.nama)+" baru saja mendaftar pada "+t._s(t.$root.indonesianDate(t.notification.member.created_at))+"\n            ")]),t._v(" "),s("span",{staticClass:"mt-0"},[t.notification.member.no_anggota?s("span",[s("i",{staticClass:"fa fa-check"}),t._v(" Sudah approve")]):s("span",[s("i",{staticClass:"fa fa-spinner"}),t._v(" Segera lakukan Approval")])])])])])}),[],!1,null,null,null).exports},props:["notification"],filters:{actionString:function(t){var a="";return"member-approval"==t&&(a="Menunggu Approval"),a}},methods:{goToAction:function(){var t=this.notification;t.referal_id?"member-approval"==t.action&&this.$router.push({name:"member.detail",params:{member_id:t.referal_id}}):toastr.warning("Tidak dapat membuka Notifikasi"),this.setNotificationStatus(t)},setNotificationStatus:function(t){axios.put("/api/notification/".concat(t.id,"/set_viewed"))}}};var n=s(3379),o=s.n(n),l=s(2856),c={insert:"head",singleton:!1};o()(l.Z,c);l.Z.locals;const v={components:{NotificationCard:(0,i.Z)(r,(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"mb-1 card pointer",class:{"is-not-viewed":"n"==t.notification.is_viewed},on:{click:t.goToAction}},[s("div",{staticClass:"card-body"},[s("p",{staticClass:"mb-0 list-header"},[t._v(t._s(t._f("actionString")(t.notification.action)))]),t._v(" "),s("p",{staticClass:"mt-0 mb-0 list-subheader"},[t._v("\n            "+t._s(t.$root.indonesianDate(t.notification.created_at))+"\n        ")]),t._v(" "),s("hr"),t._v(" "),"member-approval"==t.notification.action?s("MemberApproval",{attrs:{notification:t.notification}}):t._e()],1)])}),[],!1,null,"2c0348e7",null).exports},data:function(){return{table:{rows:[],last_page:0,totalRows:0,serverParams:{start:"",end:"",status:""}}}},mounted:function(){this.initData()},methods:{initData:function(){var t=this;$.LoadingOverlay("show"),axios.get("/api/notification",{params:this.table.serverParams}).then((function(a){t.$root.setPageHeader("Notifikasi Anda","Fetched ".concat(t.table.rows.length," from total ").concat(t.table.totalRows)),t.table.rows=a.data.data,t.table.totalRows=a.data.total})).catch((function(t){console.log(t)})).then((function(){$.LoadingOverlay("hide")}))},resetFilter:function(){this.table.serverParams={start:"",end:"",status:""},this.initData()},applyFilter:function(){if(this.table.serverParams.start&&""===this.table.serverParams.end)return toastr.warning("Batas Akhir Tidak Boleh Kosong","Oooppss!"),!1;this.initData()}}};const d=(0,i.Z)(v,(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",[s("div",{staticClass:"row mt-1"},[s("div",{staticClass:"col-4"},[s("div",{staticClass:"card"},[t._m(0),t._v(" "),s("div",{staticClass:"card-body"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-6"},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"start"}},[t._v("Tanggal Mulai")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.table.serverParams.start,expression:"table.serverParams.start"}],staticClass:"form-control",attrs:{type:"date",id:"start"},domProps:{value:t.table.serverParams.start},on:{input:function(a){a.target.composing||t.$set(t.table.serverParams,"start",a.target.value)}}})])]),t._v(" "),s("div",{staticClass:"col-6"},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"end"}},[t._v("Tanggal Selesai")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.table.serverParams.end,expression:"table.serverParams.end"}],staticClass:"form-control",attrs:{type:"date",id:"end"},domProps:{value:t.table.serverParams.end},on:{input:function(a){a.target.composing||t.$set(t.table.serverParams,"end",a.target.value)}}})])]),t._v(" "),s("div",{staticClass:"col-12"},[s("label",{attrs:{for:"status"}},[t._v("Status")]),t._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.table.serverParams.status,expression:"table.serverParams.status"}],staticClass:"form-control",attrs:{name:"status",id:"status"},on:{change:function(a){var s=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.table.serverParams,"status",a.target.multiple?s:s[0])}}},[s("option",{attrs:{value:""}},[t._v("-- Semua Status --")]),t._v(" "),s("option",{attrs:{value:"y"}},[t._v("Sudah Dibaca")]),t._v(" "),s("option",{attrs:{value:"n"}},[t._v("Belum Dibaca")])])])]),t._v(" "),s("div",{staticClass:"d-grid mt-2"},[s("button",{staticClass:"btn btn-primary mb-1",on:{click:t.applyFilter}},[s("i",{staticClass:"fa fa-check"}),t._v(" Terapkan Filter")]),t._v(" "),s("button",{staticClass:"btn btn-warning",on:{click:t.resetFilter}},[s("i",{staticClass:"fa fa-refresh"}),t._v(" Reset Filter")])])])])]),t._v(" "),s("div",{staticClass:"col-8"},t._l(t.table.rows,(function(t){return s("div",{key:t.id,staticClass:" mb-1"},[s("NotificationCard",{attrs:{notification:t}})],1)})),0)])])}),[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"card-header"},[s("h4",{staticClass:"card-title"},[s("i",{staticClass:"fa fa-filter"}),t._v(" Filter")])])}],!1,null,null,null).exports}}]);